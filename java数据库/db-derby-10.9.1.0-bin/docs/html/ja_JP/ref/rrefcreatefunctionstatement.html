<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ja" xml:lang="ja">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="reference" name="DC.Type" />
<meta name="DC.Title" content="CREATE FUNCTION 文" />
<meta name="abstract" content="CREATE FUNCTION文により、式で利用できるJava関数を作成できます。" />
<meta name="description" content="CREATE FUNCTION文により、式で利用できるJava関数を作成できます。" />
<meta content="CREATE FUNCTION statement, CREATE FUNCTION, SQL statements, functions, creating" name="DC.subject" />
<meta content="CREATE FUNCTION statement, CREATE FUNCTION, SQL statements, functions, creating" name="keywords" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj95081.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj20937.html" />
<meta scheme="URI" name="DC.Relation" content="rrefcreateprocedurestatement.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj31580.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqljcreatesynonym.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj24513.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj43125.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj15446.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="rrefcreatefunctionstatement" name="DC.Identifier" />
<meta content="ja" name="DC.Language" />
<link href="commonltr.css" type="text/css" rel="stylesheet" />
<title>CREATE FUNCTION 文</title>
</head>
<body id="rrefcreatefunctionstatement"><a name="rrefcreatefunctionstatement"><!-- --></a>


<h1 class="topictitle1">CREATE FUNCTION 文</h1>



<div><p>CREATE FUNCTION文により、式で利用できるJava関数を作成できます。</p>

<div class="section"><p>関数の所有者および、<a href="rrefattrib26867.html#rrefattrib26867">データベースの所有者</a>は、自動的に関数へのEXECUTE権限を手に入れます。加えて、他のユーザへの権限付与の権限も手に入れます。関数とデータベースの所有者から、関数の実行権限を剥奪することはできません。</p>
</div>

<div class="section"><h2 class="sectiontitle">構文</h2> <pre><strong>CREATE FUNCTION <em><a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrprofunctionname">関数名</a></em> ( [ <a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrprofunctionparameter">関数の引数</a> 
   [, <a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrprofunctionparameter">FunctionParameter</a>] ] * ) RETURNS <a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrfunctionreturntype">返却データ型</a> [ <a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrprofunctionelement">関数の要素</a> ] *</strong></pre>
</div>

<div class="example" id="rrefcreatefunctionstatement__rrefcrprofunctionname"><a name="rrefcreatefunctionstatement__rrefcrprofunctionname"><!-- --></a><h2 class="sectiontitle">関数名</h2><pre><strong>[ <em><a href="rrefschemaname.html#rrefschemaname">スキーマ名</a>.</em> ] <em><a href="crefsqlj34834.html#crefsqlj34834">SQL92識別子</a></em></strong></pre>

<p>スキーマ名が与えられなかった場合、デフォルトは現在のスキーマとなります。限定された関数名にて、スキーマ名はSYSで始まってはなりません。</p>
</div>

<div class="example" id="rrefcreatefunctionstatement__rrefcrprofunctionparameter"><a name="rrefcreatefunctionstatement__rrefcrprofunctionparameter"><!-- --></a><h2 class="sectiontitle">関数の引数</h2><pre><strong>[ 引数名 ] <em>データ型</em></strong></pre>
</div>

<div class="section"><p>引数名は関数にて一意である必要があります。</p>
<p><em>データ型</em>の構文は、<a href="crefsqlj31068.html#crefsqlj31068">データ型</a>に書かれています。</p>

<div class="note"><span class="notetitle">注: </span>CREATE FUNCTION文のパラメータにできないデータ型があります。それは、BLOB、CLOB、LONG VARCHAR、LONG VARCHAR FOR BIT DATAやXML等です。</div>
</div>


<div class="example" id="rrefcreatefunctionstatement__rrefcrfunctionreturntype"><a name="rrefcreatefunctionstatement__rrefcrfunctionreturntype"><!-- --></a><h2 class="sectiontitle">返却データ型</h2>
<pre><strong><a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrfunctiontabletype">表型</a> | <em>データ型</em></strong></pre>
</div>

<div class="section"><p>データ型の構文は<a href="crefsqlj31068.html#crefsqlj31068">データ型</a>に記述されています。</p>
</div>


<div class="example" id="rrefcreatefunctionstatement__rrefcrfunctiontabletype"><a name="rrefcreatefunctionstatement__rrefcrfunctiontabletype"><!-- --></a><h2 class="sectiontitle">表型</h2>
<pre><strong>TABLE( <a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrfunctioncolelement">列要素</a> [, <a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrfunctioncolelement">列要素</a> ]* )</strong></pre>
</div>

<div class="section"><p>表関数の返り値の型です。現在利用できるのはDerbyの表関数の形式のみです。
これらはJDBCの<em>ResultSet</em>を返す関数です。
より詳細な情報は、<cite><span><em>Derby Developer's Guide</em></span></cite>に記述された「Derbyの表関数のプログラミング」を参照してください。</p>
</div>


<div class="example" id="rrefcreatefunctionstatement__rrefcrfunctioncolelement"><a name="rrefcreatefunctionstatement__rrefcrfunctioncolelement"><!-- --></a><h2 class="sectiontitle">列要素</h2>
<pre><strong><em><a href="crefsqlj34834.html#crefsqlj34834">SQL92識別子</a></em> <em>データ型</em></strong></pre>
</div>

<div class="section"><p><em>データ型</em>の構文は、<a href="crefsqlj31068.html#crefsqlj31068">データ型</a>に記述されています。</p>

<div class="note"><span class="notetitle">注: </span>表関数から返却する情報の列の型を、XMLとすることはできません。</div>
</div>


<div class="example" id="rrefcreatefunctionstatement__rrefcrprofunctionelement"><a name="rrefcreatefunctionstatement__rrefcrprofunctionelement"><!-- --></a><h2 class="sectiontitle">関数の要素</h2> <pre><strong> {
| LANGUAGE { JAVA }
| EXTERNAL NAME <em>文字列</em>
| PARAMETER STYLE <a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrfunctionparameterstyle">パラメータの種類</a>
| { NO SQL | CONTAINS SQL | READS SQL DATA }
| { RETURNS NULL ON NULL INPUT | CALLED ON NULL INPUT }
 }</strong></pre>
</div>

<div class="section"><h2 class="sectiontitle">LANGUAGE</h2><p><strong>JAVA</strong>- 関数はJavaのクラスにあるpublic staticなメソッドとして呼ばれます。</p>
</div>

<div class="section"><h2 class="sectiontitle">EXTERNAL NAME <em>string</em></h2><div class="p"><em>文字列</em>により、関数が実行されたときに呼ばれるJavaのメソッドが記述されます。この文字列は次の書式です。<pre>クラス名.メソッド名</pre>
これは空白を含んではなりません。</div>
</div>


<div class="example" id="rrefcreatefunctionstatement__rrefcrfunctionparameterstyle"><a name="rrefcreatefunctionstatement__rrefcrfunctionparameterstyle"><!-- --></a><h2 class="sectiontitle">パラメータの種類</h2>
<pre><strong>JAVA | DERBY_JDBC_RESULT_SET</strong></pre>
</div>

<div class="section">
<p>
関数はJava言語およびSQLルーチンの仕様に沿って、引数を値渡しします。INOUTとOUTの引数は変更後の値を返せるように、要素がひとつの配列として渡されます。さらに結果セットはJavaのメソッドのパラメータを経て、配列に渡したjava.sql.ResultSet[]型の要素により返すことができます。</p>
<p><span>Derby</span> は長い列の型(これは例えばLong VarcharやBLOB等のことです。)をサポートしません。
これらの長い列の型を使おうとすると、エラーが発生します。</p>

<p>Derbyの表関数の場合、PARAMETER STYLEは常にDERBY_JDBC_RESULT_SETで、これ以外の値とすることはできません。表関数とは<a href="rrefcreatefunctionstatement.html#rrefcreatefunctionstatement__rrefcrfunctiontabletype">表型</a>を返す関数で、JDBCの<em>ResultSet</em>を返すメソッドに対応します。
それ以外の場合は、PARAMETER STYLEは常にJAVAです。
</p>

</div>

<div class="section"><h2 class="sectiontitle">NO SQL, CONTAINS SQL, READS SQL DATA</h2> <p>により関数がSQLを発行するか否か。もしするならどのようなSQLを発行するかを記述します。</p>
 <dl>

<dt class="dlterm">CONTAINS SQL</dt>

<dd>関数により変更も更新も行わないSQL文を実行できます。
関数にて許可されていない文が実行された場合、違うというエラーが返ります。</dd>


<dt class="dlterm">NO SQL</dt>

<dd>関数はSQLを実行できません。</dd>


<dt class="dlterm">READS SQL DATA </dt>

<dd>関数は情報の更新を行わないSQLを実行することができます。
関数にて許可されていない文が実行された場合、違うというエラーが返ります。
これは既定です。</dd>

</dl>
</div>

<div class="section"><h2 class="sectiontitle">RETURNS NULL ON NULL INPUT or CALLED ON NULL INPUT</h2>
<div class="p">入力の引数をnullにして関数が呼ばれるかをあらわします。その場合はnull値と扱います。<dl>
<dt class="dlterm">RETURNS NULL ON NULL INPUT</dt>

<dd>入力の引数のうちいずれかがnullであった場合、関数は呼ばれません。そのときの帰り値はnullとなります。</dd>


<dt class="dlterm">CALLED ON NULL INPUT</dt>

<dd>関数は入力の引数をnullにして呼ぶことができます。この場合は関数がnullの引数をとっても動作するようにコーディングされていなければなりません。関数はnullあるいはそれ以外の値を返すことができます。これは既定です。</dd>

</dl>
</div>
</div>

<div class="section"><div class="p">関数の要素はどのような順序で現れてもかまいませんが、それぞれの要素は一回しか現れてはなりません。関数の定義にはこれらの要素が必要です。<ul>
<li><strong>LANGUAGE</strong></li>

<li><strong>PARAMETER STYLE</strong></li>

<li><strong>EXTERNAL NAME</strong></li>

</ul>
</div>
</div>

<div class="section"><h2 class="sectiontitle">Example</h2><pre><strong>CREATE FUNCTION TO_DEGREES(RADIANS DOUBLE) RETURNS DOUBLE
PARAMETER STYLE JAVA NO SQL LANGUAGE JAVA
EXTERNAL NAME 'java.lang.Math.toDegrees'</strong></pre>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>親トピック:</strong> <a href="crefsqlj95081.html" title="">CREATE 文</a></div>
</div>
<div class="relref"><strong>関連資料</strong><br />
<div><a href="rrefsqlj20937.html" title="">CREATE INDEX 文</a></div>
<div><a href="rrefcreateprocedurestatement.html" title="">CREATE PROCEDURE 文</a></div>
<div><a href="rrefsqlj31580.html" title="">CREATE SCHEMA 文</a></div>
<div><a href="rrefsqljcreatesynonym.html" title="">CREATE SYNONYM 文</a></div>
<div><a href="rrefsqlj24513.html" title="">CREATE TABLE 文</a></div>
<div><a href="rrefsqlj43125.html" title="">CREATE TRIGGER 文</a></div>
<div><a href="rrefsqlj15446.html" title="">CREATE VIEW 文</a></div>
</div>
</div>

</body>
</html>
