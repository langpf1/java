<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ja" xml:lang="ja">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="reference" name="DC.Type" />
<meta name="DC.Title" content="SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE システム手続き" />
<meta name="abstract" content="SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILEシステム手続きを使って表にある列にインポートすることができます。このときLOBのデータは別ファイルから分けてインポートされます。 主となるインポートファイルには、LOBの情報がある場所への参照と他の全データが置かれます。" />
<meta name="description" content="SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILEシステム手続きを使って表にある列にインポートすることができます。このときLOBのデータは別ファイルから分けてインポートされます。 主となるインポートファイルには、LOBの情報がある場所への参照と他の全データが置かれます。" />
<meta scheme="URI" name="DC.Relation" content="crefsqlbuiltinsystemprocedures.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="rrefimportdataproclobs" name="DC.Identifier" />
<meta content="ja" name="DC.Language" />
<link href="commonltr.css" type="text/css" rel="stylesheet" />
<title>SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE システム手続き</title>
</head>
<body id="rrefimportdataproclobs"><a name="rrefimportdataproclobs"><!-- --></a>


<h1 class="topictitle1">SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE システム手続き</h1>


<div><p><samp class="codeph">SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE</samp>システム手続きを使って表にある列にインポートすることができます。このときLOBのデータは別ファイルから分けてインポートされます。
主となるインポートファイルには、LOBの情報がある場所への参照と他の全データが置かれます。</p>

<div class="section"><h2 class="sectiontitle">構文</h2><pre>SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE (
   IN SCHEMANAME VARCHAR(128), 
   IN TABLENAME VARCHAR(128), 
   IN INSERTCOLUMNS VARCHAR(32672), 
   IN COLUMNINDEXES VARCHAR(32672),
   IN FILENAME VARCHAR(32672), 
   IN COLUMNDELIMITER CHAR(1), 
   IN CHARACTERDELIMITER CHAR(1), 
   IN CODESET VARCHAR(128), 
   IN REPLACE SMALLINT)
   )
</pre>

<p>インポートユーティリティはLOBの情報がある場所への参照を主となるインポートファイルから探します。</p>
<dl>
<dt class="dlterm">SCHEMANAME</dt>

<dd>表のスキーマを指定します。既定のスキーマ名を利用するために、NULLの値を指定することができます。
<span class="parmname">SCHEMANAME</span>パラメータは、VARCHAR (128)型の引数を入力にとります。</dd>


<dt class="dlterm">TABLENAME</dt>

<dd>情報がインポートされる表の名前を指定します。
表はシステム表や一時表であってはなりません。
文字列は表名と大文字小文字が一致していなければなりません。NULL値を指定するとエラーとなります。
<span class="parmname">TABLENAME</span>パラメータは、VARCHAR (128)型の引数を入力にとります。</dd>


<dt class="dlterm">INSERTCOLUMNS</dt>

<dd>情報がインポートされる表の列の名前を、コンマで区切って指定します。
表の全列へインポートする場合、NULL値を指定することができます。
<span class="parmname">INSERTCOLUMNS</span>パラメータは、VARCHAR (32672)型の引数を入力にとります。</dd>


<dt class="dlterm">COLUMNINDEXES</dt>

<dd>入力される情報のうち、インポートされる欄の列番号(1から数えます。)をコンマで区切って指定します。
ファイルの全欄を指定する場合、NULL値を指定することもできます。<span class="parmname">COLUMNINDEXES</span>パラメータは、VARCHAR (32762)型の引数を入力にとります。</dd>


<dt class="dlterm">FILENAME</dt>

<dd>インポートする情報のあるファイルの名前を指定します。パスが省略された場合、現在の作業ディレクトリが使われます。ネットワークサーバで利用する場合、ファイルの位置はサーバサイドの位置を参照します。
NULLを指定するとエラーになります。
<span class="parmname">fileName</span>パラメータは、VARCHAR (32672)型の引数を入力にとります。</dd>


<dt class="dlterm">COLUMNDELIMITER</dt>

<dd>列のデリミタを指定します。指定された文字はコンマの代わりに列の終わりを表します。既定値のコンマを利用する場合、NULL値を指定できます。
<span class="parmname">COLUMNDELIMITER</span>パラメータは、CHAR (1)型の引数を入力にとります。</dd>


<dt class="dlterm">CHARACTERDELIMITER</dt>

<dd>文字のデリミタを指定します。指定された文字は二重引用符の代わりに列の終わりを表します。既定値の二重引用符を利用する場合、NULL値を指定できます。
<span class="parmname">CHARACTERDELIMITER</span>パラメータは、
CHAR (1)型の引数を入力にとります。</dd>


<dt class="dlterm">CODESET</dt>

<dd>入力ファイル中の情報のコードセットを指定します。コードセットの名前はJavaで利用可能な文字円コーディングでなければなりません。
情報は指定されたコードセットから、データベースのコードセット(UTF-8)へと変換されます。
実行するJVMと同じコードセットでデータファイルを解釈する場合、NULL値を指定することができます。
<span class="parmname">CODESET</span>パラメータは、VARCHAR (128)データ型を入力にとります。</dd>


<dt class="dlterm">REPLACE</dt>

<dd>このパラメータに0以外の値を指定すると、インポートがREPLACEモードで行われます。一方で0を指定すると、インポートはINSERTモードで行われます。
REPLACEモードでは表にある既存の情報はすべて切り捨てられたのち、インポートした情報が挿入されます。
表の定義や索引の定義には変更がありません。表が既にある場合のみ、REPLACEモードで情報をインポートすることができます。INSERTモードでは既存の表の情報に変更を加えずに、インポートした情報を追加します。
パラメータにNULL値を指定するとエラーが発生します。
<span class="parmname">REPLACE</span>パラメータは、SMALLINTデータ型を入力にとります。</dd>

</dl>

<p>デリミトされない識別子でスキーマ、表、列が作成された場合、インポートの手続きに渡す名前はすべて大文字でなければなりません。
デリミトされた識別子でスキーマ、表、列が作成された場合、インポートの手続きに渡す名前は作成された名前と大文字と小文字が一致しなければなりません。</p>
</div>

<div class="section"><h2 class="sectiontitle">使い方</h2>
<p>この手続きは主となるインポートファイルに書かれた参照を使って、LOBの情報を読みます。
主となるインポートファイルに書かれたLOBへの参照は、<samp class="codeph">lobsFileName.Offset.length/</samp>という書式に決まっています。
</p>

<ul>
<li><samp class="codeph">Offset</samp>は外部ファイル中のバイト数で数えた位置です。</li>

<li><samp class="codeph">length</samp>はバイト数で数えたLOB列の情報の長さです。</li>

</ul>

<p>この手続きの使い方については、<span><em>Derby Tools and Utilities Guide</em></span>の「バルクインポートとエクスポートの手続きを使う」の章も参照してください。</p>
</div>

<div class="section"><h2 class="sectiontitle">指定した列にデータをインポートする例。LOBデータは別ファイルからインポートされる。</h2>
以下の例では、STAFF表のいくつかの列に情報をインポートする方法を示します。
STAFF表にはサンプルデータベースのLOB列があります。
インポートファイルの<samp class="codeph">staff.del</samp>は、デリミトされたデータファイルです。<samp class="codeph">staff.del</samp>ファイルには、LOBデータの書かれた外部ファイルへの参照が書かれます。
入力ファイルの情報は、文字のデリミタが二重引用符(")、列のデリミタがコンマ(')という書式となっています。
インポートした情報はSTAFF表の既存の情報に追加されます。
<pre>CALL SYSCS_UTIL.SYSCS_IMPORT_DATA_LOBS_FROM_EXTFILE
    (null, 'STAFF', 'NAME,DEPT,SALARY,PICTURE', '2,3,4,6',
+    'c:＼data＼staff.del', ',','"','UTF-8',  0);</pre>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>親トピック:</strong> <a href="crefsqlbuiltinsystemprocedures.html" title="">組み込みシステム手続き</a></div>
</div>
</div>

</body>
</html>
