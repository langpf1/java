<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="ja" xml:lang="ja">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="reference" name="DC.Type" />
<meta name="DC.Title" content="fnキーワードを使ったJDBCエスケープ構文" />
<meta content="fn, JDBC escape keyword, JDBC, escape keyword, escape keyword, JDBC, escape functions, substring, JDBC scalar function, mod, JDBC scalar function, locate, JDBC scalar function, abs, sqrt, concat, TIMESTAMPADD function, TIMESTAMPDIFF function, acos, asin, atan, ceiling, cos, degrees, exp, floor, log, log10, pi, radians, sin, tan" name="DC.subject" />
<meta content="fn, JDBC escape keyword, JDBC, escape keyword, escape keyword, JDBC, escape functions, substring, JDBC scalar function, mod, JDBC scalar function, locate, JDBC scalar function, abs, sqrt, concat, TIMESTAMPADD function, TIMESTAMPDIFF function, acos, asin, atan, ceiling, cos, degrees, exp, floor, log, log10, pi, radians, sin, tan" name="keywords" />
<meta scheme="URI" name="DC.Relation" content="rrefjdbc1020262.html" />
<meta scheme="URI" name="DC.Relation" content="rrefjdbc70824.html" />
<meta scheme="URI" name="DC.Relation" content="rrefjdbc27768.html" />
<meta scheme="URI" name="DC.Relation" content="rrefjdbc28456.html" />
<meta scheme="URI" name="DC.Relation" content="rrefjdbc37244.html" />
<meta scheme="URI" name="DC.Relation" content="rrefjdbc12124.html" />
<meta scheme="URI" name="DC.Relation" content="rrefjdbcescapedate.html" />
<meta scheme="URI" name="DC.Relation" content="rrefjdbc41784.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="rrefjdbc88908" name="DC.Identifier" />
<meta content="ja" name="DC.Language" />
<link href="commonltr.css" type="text/css" rel="stylesheet" />
<title>fnキーワードを使ったJDBCエスケープ構文</title>
</head>
<body id="rrefjdbc88908"><a name="rrefjdbc88908"><!-- --></a>


<h1 class="topictitle1">fnキーワードを使ったJDBCエスケープ構文</h1>


<div>
<div class="section"> <p>JDBCエスケープ構文にて<span class="parmname">fn</span>というキーワードを使うことで関数を指定できます。</p>
</div>

<div class="section"><h2 class="sectiontitle">構文</h2><pre><strong>{fn <em>関数呼び出し</em>}</strong></pre>
<p>ここで<em>関数呼び出し</em>は、以下に挙げるスカラー関数の何れかの名前です。</p>
<dl>
<dt class="dlterm">abs</dt>

<dd>数の絶対値を返す。<pre><strong>abs(<em>数式</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn abs(<em>数式</em>)}は、組込み構文の<a href="rrefsqlj98067.html#rrefsqlj98067__i1195049">ABSOLUTE(数式)</a>と同等です。
より詳細な情報は、<a href="rrefsqlj98067.html#rrefsqlj98067">ABSとABSVAL関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">acos</dt>

<dd>指定した数の逆余弦を返します。<pre><strong>acos(<em>数</em>)</strong></pre>
<p>JDBCエスケープ構文の{fn acos(<em>数</em>)}は、組込み構文のACOS(数)と同等です。より詳細な情報は、<a href="rreffuncacos.html#rreffuncacos">ACOS</a>を参照してください。</p>
</dd>


<dt class="dlterm">asin</dt>

<dd>指定した数の逆正弦を返します。<pre><strong>asin(<em>数</em>)</strong></pre>
<p>JDBCエスケープ構文の{fn asin(<em>数</em>)}は、組込み構文のASIN(数)と同等です。より詳細な情報は、<a href="rreffuncasin.html#rreffuncasin">ASIN</a>を参照してください。</p>
</dd>


<dt class="dlterm">atan</dt>

<dd>指定した数の逆正接を返します。<pre><strong>atan(<em>数</em>)</strong></pre>
<p>The
JDBCエスケープ構文の{fn atan(<em>数</em>)}は、組込み構文のATAN(数)と同等です。より詳細な情報は、<a href="rreffuncatan.html#rreffuncatan">ATAN</a>を参照してください。</p>
</dd>


<dt class="dlterm">ceiling</dt>

<dd>指定した数を切り上げて、指定した数以上の最小の数を返します。<pre><strong>ceiling(<em>数</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn ceiling(<em>数</em>)}は、組込み構文のCEILING(数)と同等です。より詳細な情報は<a href="rreffuncceil.html#rreffuncceil">CEILおよびCEILING関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">concat</dt>

<dd>連結した文字列を返します。<pre><strong>concat(<em>文字式</em>, <em>文字式</em>)</strong></pre>
<p>最初の文字列に二つ目の文字列を連結した文字列が構成されます。もしどちらかの文字列が空なら、返り値はNULLとなります。JDBCエスケープ構文の{fn concat
(<em>文字式</em>, <em>文字式</em>)は、組込み構文の{ 文字式 || 文字式 }と同等です。詳細は、<a href="rrefsqlj40899.html#rrefsqlj40899">Concatenation</a>を参照してください。</p>
</dd>


<dt class="dlterm">cos</dt>

<dd>指定した引数の余弦を返します。<pre><strong>cos(<em>数</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn cos(<em>数</em>)}は、組込み構文のCOS(数)と同等です。詳細は、<a href="rreffunccos.html#rreffunccos">COS 関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">degrees</dt>

<dd>指定した数をラジアンから度に変換します。<pre><strong>degrees(<em>数</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn degrees(<em>数</em>)}は、組込み構文のDEGREES(数)と同等です。詳細は<a href="rreffuncdegrees.html#rreffuncdegrees">DEGREES 関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">exp</dt>

<dd><dfn class="term">e</dfn>を指定した数で累乗した数を返します。<pre><strong>exp(<em>数</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn exp(<em>数</em>)}は、組み込み構文のEXP(数)と同等です。詳細は<a href="rreffuncexp.html#rreffuncexp">EXP関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">floor</dt>

<dd>指定した数を切り捨てて、指定した数以下の最大の数を返します。<pre><strong>floor(<em>数</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn floor(<em>数</em>)}は、組込み構文のFLOOR(数)と同等です。
詳細は<a href="rreffuncfloor.html#rreffuncfloor">FLOOR関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">locate</dt>

<dd>二つ目の<em>文字式</em>のうちで、一つ目の<em>文字式</em>が見つかる位置を返します。
<em>開始位置</em>が指定されない場合、二つ目の<em>文字式</em>の頭から、一致する位置を見つけようとします。<pre><strong>locate(<em>文字式</em>,<em>文字式</em> [, <em>開始位置</em>] )</strong></pre>

<p>JDBCエスケープ構文の{fn locate(<em>文字式</em>,<em>文字式</em> [, <em>開始位置</em>]
)}は、組込み構文の<a href="rrefsqlj61998.html#rrefsqlj61998__i1195050">LOCATE(CharacterExpression,
CharacterExpression [, StartPosition] )</a>と等価です。詳細は<a href="rrefsqlj61998.html#rrefsqlj61998">LOCATE関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">log</dt>

<dd>指定した数の自然対数(底を<dfn class="term">e</dfn>とします。)を返します。<pre><strong>log(<em>数</em>)</strong> </pre>

<p>JDBCエスケープ構文の{fn log(<em>数</em>)}は、組込み構文のLOG(数)と等価です。詳細は<a href="rreffunclog.html#rreffunclog">LNあるいはLOG関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">log10</dt>

<dd>指定した数の10を底とする対数を返します。<pre><strong>log10(<em>数</em>)</strong></pre>
<p>JDBCエスケープ構文の{fn log10(<em>数</em>)}は、組込み構文の、LOG10(数)と等価です。詳細は<a href="rreffunclog10.html#rreffunclog10">LOG10 関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">mod</dt>

<dd> 一つ目の引数を二つ目の引数で割った余り(剰余)を返します。
一つ目の引数が負であった場合のみ、結果は負となります。<pre><strong>mod(<em>整数</em>, <em>整数</em>)</strong></pre>

<p>詳細は<a href="rrefsqljmod.html#rrefsqljmod">MOD関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">pi</dt>

<dd><dfn class="term">pi</dfn>の最近似値を返します。<pre><strong>pi()</strong></pre>

<p>JDBCエスケープ構文の{fn pi()}は、組込み構文のPI()と等価です。詳細は<a href="rreffuncpi.html#rreffuncpi">PI 関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">radians</dt>

<dd>指定した数を度からラジアンに変換します。<pre><strong>radians(<em>数</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn radians(<em>数</em>)}は、組込み構文のRADIANS(数)と等価です。詳細は<a href="rreffuncradians.html#rreffuncradians">RADIANS 関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">sin</dt>

<dd>指定した数の正弦を返します。<pre><strong>sin(<em>数</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn sin(<em>数</em>)}は、組込み構文のSIN(数)と等価です。詳細は<a href="rreffuncsin.html#rreffuncsin">SIN</a>を参照してください。</p>
</dd>


<dt class="dlterm">sqrt</dt>

<dd>浮動小数点数の平方根を返します。<pre><strong>sqrt(<em>浮動小数点数式</em>)</strong></pre>
<p>
JDBCエスケープ構文の{fn sqrt (<em>浮動小数点数式</em>)}は、組込み構文の<a href="rrefsqlj73147.html#rrefsqlj73147__i1195048">SQRT(浮動小数点数式)</a>と等価です。詳細は<a href="rrefsqlj73147.html#rrefsqlj73147">SQRT関数</a>を参照してください。</p>
</dd>


<dt class="dlterm">substring</dt>

<dd><em>文字式</em>の<em>開始位置</em>から始まる部分文字列を構成して返します。
<em>文字式</em>の最初の文字は1と数えます。
<pre><strong>substring(<em>文字式</em>, <em>開始位置</em>, <em>長さ</em>)</strong></pre>
</dd>


<dt class="dlterm">tan</dt>

<dd>引数の正接を返します。<pre><strong>tan(<em>数</em>)</strong></pre>

<p>JDBCエスケープ構文の{fn tan(<em>数</em>)}は、組込み構文のTAN(数)と等価です。詳細は<a href="rreffunctan.html#rreffunctan">TAN</a>を参照してください。</p>
</dd>


<dt class="dlterm">TIMESTAMPADD</dt>

<dd><samp class="codeph">TIMESTAMPADD</samp>関数を使って、タイムスタンプに時間を足すことができます。関数はタイムスタンプに整数を時間の種類に沿って処理して、加算した値を新しいタイムスタンプとして返します。負の整数を与えることで減算もできます。
<p><samp class="codeph">TIMESTAMPADD</samp>はJDBCエスケープの関数で、JDBCエスケープ関数の構文でのみ利用可能です。</p>

<pre><strong>TIMESTAMPADD( <em>時間の種類</em>, <em>整数式</em>, <em>タイムスタンプ式</em> )</strong></pre>

<p>日付や時刻に<samp class="codeph">TIMESTAMPADD</samp>を実行するには、日付や時刻をタイムスタンプに変換する必要があります。日付は時刻のフィールドに00:00:00.0を与えることでタイムスタンプに変換できます。時刻は現在日付を日付のフィールドに与えることで、タイムスタンプに変換できます。</p>

<p>WHERE節にて、タイムスタンプを計算する関数に日時の列を置くべきではありません。なぜならオプティマイザが、その列への索引を利用しなくなるからです。</p>
</dd>


<dt class="dlterm">TIMESTAMPDIFF</dt>

<dd><samp class="codeph">TIMESTAMPDIFF</samp>関数により指定した時間の種類によるタイムスタンプの間の差を計算できます。例えば、関数により二つのタイムスタンプ間の分数を返すことができます。
<p><samp class="codeph">TIMESTAMPDIFF</samp>はJDBCエスケープの関数で、JDBCエスケープ関数の構文でのみ利用できます。</p>

<pre><strong>TIMESTAMPDIFF( <em>時間の種類</em>, <em>タイムスタンプ式1</em>, <em>タイムスタンプ式2</em> )</strong></pre>

<p>日付や時刻に<samp class="codeph">TIMESTAMPDIFF</samp>を実行するには、日付や時刻をタイムスタンプに変換する必要があります。日付は時刻のフィールドに00:00:00.0を与えることでタイムスタンプに変換できます。時刻は現在日付を日付のフィールドに与えることで、タイムスタンプに変換できます。</p>

<p>WHERE節にて、タイムスタンプを計算する関数に日時の列を置くべきではありません。なぜならオプティマイザが、その列への索引を利用しなくなるからです。</p>
</dd>

</dl>
</div>

<div class="section"><h2 class="sectiontitle">TIMESTAMPADD および TIMESTAMPDIFFに指定できる時間の種類</h2>
<samp class="codeph">TIMESTAMPADD</samp>および<samp class="codeph">TIMESTAMPDIFF</samp>は、タイムスタンプへの算術演算を行うために使われます。これ等の関数は以下にあげる時間の種類を演算処理で利用できます。<ul>
<li>SQL_TSI_DAY</li>

<li>SQL_TSI_FRAC_SECOND</li>

<li>SQL_TSI_HOUR</li>

<li>SQL_TSI_MINUTE</li>

<li>SQL_TSI_MONTH</li>

<li>SQL_TSI_QUARTER</li>

<li>SQL_TSI_SECOND</li>

<li>SQL_TSI_WEEK</li>

<li>SQL_TSI_YEAR</li>

</ul>
</div>

<div class="example"><h2 class="sectiontitle">エスケープ関数のTIMESTAMPADDとTIMESTAMPDIFFを利用する例</h2>
<p>次の書き方で、現在より一ヵ月後の値を返します。</p>
<pre><strong>{fn TIMESTAMPADD( SQL_TSI_MONTH, 1, CURRENT_TIMESTAMP)}</strong></pre>

<p>次の書き方で、現在と2008年1月1日の間が何週間かを返します。</p>
<pre><strong>{fn TIMESTAMPDIFF(SQL_TSI_WEEK, CURRENT_TIMESTAMP, 
  timestamp('2008-01-01-12.00.00.000000'))}</strong></pre>
</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>親トピック:</strong> <a href="rrefjdbc1020262.html" title="">JDBCエスケープの構文</a></div>
</div>
<div class="relref"><strong>関連資料</strong><br />
<div><a href="rrefjdbc70824.html" title="">呼び出し文のJDBCエスケープキーワード</a></div>
<div><a href="rrefjdbc27768.html" title="">JDBCエスケープ構文</a></div>
<div><a href="rrefjdbc28456.html" title="">LIKE節のJDBCエスケープ構文</a></div>
<div><a href="rrefjdbc37244.html" title="">外部結合のJDBCエスケープ構文</a></div>
<div><a href="rrefjdbc12124.html" title="">時刻書式のJDBCエスケープ構文</a></div>
<div><a href="rrefjdbcescapedate.html" title="">日付書式のJDBCエスケープ構文</a></div>
<div><a href="rrefjdbc41784.html" title="">タイムスタンプ書式のJDBCエスケープ構文</a></div>
</div>
</div>

</body>
</html>
