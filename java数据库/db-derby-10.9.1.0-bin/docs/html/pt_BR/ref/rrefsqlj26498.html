<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="pt-br" xml:lang="pt-br">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="reference" name="DC.Type" />
<meta name="DC.Title" content="Instrução UPDATE" />
<meta content="UPDATE statement" name="DC.subject" />
<meta content="UPDATE statement" name="keywords" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj39374.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj22771.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj81859.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj95081.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj80721.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqljrenamestatements.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj35312.html" />
<meta scheme="URI" name="DC.Relation" content="rrefcallprocedure.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13590.html" />
<meta scheme="URI" name="DC.Relation" content="rrefdeclaretemptable.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35981.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj31783.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21583.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj32654.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj14854.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35034.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40774.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj29840.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj18922.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40506.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13658.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21571.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj57522.html" />
<meta scheme="URI" name="DC.Relation" content="rrefscalarsubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefselectexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj41360.html" />
<meta scheme="URI" name="DC.Relation" content="rreftableexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rreftablesubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj11277.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj33602.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj15309.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj76354.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="rrefsqlj26498" name="DC.Identifier" />
<meta content="pt-br" name="DC.Language" />
<link href="commonltr.css" type="text/css" rel="stylesheet" />
<title>Instrução UPDATE</title>
</head>
<body id="rrefsqlj26498"><a name="rrefsqlj26498"><!-- --></a>


<h1 class="topictitle1">Instrução UPDATE</h1>


<div>
<div class="section">
<p>A instrução UPDATE define o valor na coluna.</p>

<p>Pode ser atualizada a linha corrente de um cursor atualizável aberto.
Se não houver linha corrente, ou a linha corrente não satisfizer mais a
consulta do cursor, será lançada um exceção.</p>

</div>

<div class="section"><h2 class="sectiontitle">Sintaxe</h2>

<pre><strong>{
    UPDATE <em><a href="rreftablename.html#rreftablename">nome-da-tabela</a></em>
        SET <em><a href="rrefcolumnname.html#rrefcolumnname">nome-da-coluna</a></em> = <em><a href="rrefsqlj76354.html#rrefsqlj76354">Valor</a></em>
        [ , <em><a href="rrefcolumnname.html#rrefcolumnname">nome-da-coluna</a></em> = <em><a href="rrefsqlj76354.html#rrefsqlj76354">Valor</a></em>} ]*
        [<em><a href="rrefsqlj33602.html#rrefsqlj33602">Cláusula WHERE</a></em>] |
    UPDATE <em><a href="rreftablename.html#rreftablename">nome-da-tabela</a></em>
        SET <em><a href="rrefcolumnname.html#rrefcolumnname">nome-da-coluna</a></em> = <em><a href="rrefsqlj76354.html#rrefsqlj76354">Valor</a></em>
        [ , <em><a href="rrefcolumnname.html#rrefcolumnname">nome-da-coluna</a></em> = <em><a href="rrefsqlj76354.html#rrefsqlj76354">Valor</a></em> ]*
        <em><a href="rrefsqlj15309.html#rrefsqlj15309">WHERE CURRENT OF</a></em>
}</strong>
</pre>

<p>A primeira forma sintática é chamada de atualização procurada.
A segunda forma sintática é chamada de atualização posicionada.</p>

<p>Nas atualizações procuradas, são atualizadas todas as linhas da tabela para
as quais a cláusula WHERE é avaliada como TRUE.</p>

<p>Nas atualizações posicionadas, somente podem ser atualizadas as colunas
incluídas na
<a href="rrefsqlj31783.html#rrefsqlj31783">Cláusula FOR UPDATE</a>
da instrução SELECT que criou o cursor.
Se a instrução SELECT não incluir a cláusula FOR UPDATE, o cursor será
apenas-de-leitura, não podendo ser utilizado para atualizações.</p>

<p>A especificação de DEFAULT para o valor atualizado, define o valor da coluna
como o valor padrão definido nesta tabela.</p>

</div>

<div class="example"> <pre><strong><span>-- Todos os empregados, exceto o gerente,
-- do departamento (DEP_TRAB) 'E21' foram temporariamente
-- reatribuídos. Indique isto alterando seus cargos (CARGO)
-- para NULL, e os valores de seus pagamentos (SALÁRIO, BÔNUS, COMISS)
-- para zero, na tabela EMPREGADOS.</span>
UPDATE EMPREGADOS
  SET CARGO=NULL, SALÁRIO=0, BÔNUS=0, COMISS=0
  WHERE DEP_TRAB = 'E21' AND CARGO &lt;&gt; 'GERENTE'

-- Promover o cargo (CARGO) de determinado empregado para GERENTE
UPDATE EMPREGADOS
        SET CARGO = 'GERENTE'
        WHERE CURRENT OF CURS1;

<span>-- Multiplicar a equipe do projeto (PROJ_EQUIPE) por 1.5</span>
stmt.executeUpdate("UPDATE PROJETO SET PROJ_EQUIPE = "
"PROJ_EQUIPE * 1.5" +
"WHERE CURRENT OF" + ResultSet.getCursorName());

<span>-- Alterar o cargo (CARGO) do empregado número (NUM_EMP) '000290'
-- na tabela EMPREGADOS para o seu valor DEFAULT que é NULL</span>
UPDATE EMPREGADOS
  SET CARGO = DEFAULT
  WHERE NUM_EMP = '000290';
</strong>
</pre>

</div>

<div class="section"><h2 class="sectiontitle">Sistema de dependência de instrução</h2>

<p>A instrução de atualização procurada depende da tabela sendo atualizada, de
todos os seus conglomerados (unidades de armazenamento como <em>heaps</em> e
índices), todas as suas restrições, e de todas as outras tabelas referenciadas
na cláusula WHERE e nas expressões SET.
A execução de uma instrução CREATE ou DROP INDEX, ou de uma instrução
ALTER TABLE, na tabela de destino de uma instrução de atualização procurada
preparada, invalida a instrução de atualização procurada preparada.</p>

<p>A instrução de atualização posicionada depende do cursor e de todas as
tabelas que o cursor faz referência.
A atualização posicionada pode ser compilada mesmo se o cursor ainda não tiver
sido aberto.
Entretanto, a remoção do cursor aberto através do método <em>close</em> do JDBC
invalida a atualização posicionada.</p>

<p>A execução de uma instrução CREATE ou DROP INDEX, ou de uma instrução
ALTER TABLE, na tabela de destino de uma instrução de atualização posicionada
preparada, invalida a instrução de atualização posicionada preparada.</p>

<p>A remoção de um aliás invalida a instrução de atualização preparada, se a
instrução utilizar o aliás.</p>

<p>Remover ou adicionar gatilhos na tabela de destino da atualização
invalida a instrução de atualização.</p>

</div>

</div>

<div>
<ul class="ullinks">
<li class="ulchildlink"><strong><a href="rrefsqlj76354.html">Valor</a></strong><br />
</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Tópico pai:</strong> <a href="crefsqlj39374.html" title="">Instruções</a></div>
</div>
<div class="relconcepts"><strong>Conceitos relacionados</strong><br />
<div><a href="crefsqlj22771.html" title="">Interação com o sistema de dependências</a></div>
<div><a href="crefsqlj95081.html" title="">Instruções CREATE</a></div>
<div><a href="crefsqlj80721.html" title="">Instruções DROP</a></div>
<div><a href="crefsqljrenamestatements.html" title="">Instruções RENAME</a></div>
<div><a href="crefsqlj35312.html" title="">Instruções SET</a></div>
</div>
<div class="relref"><strong>Referências relacionadas</strong><br />
<div><a href="rrefsqlj81859.html" title="">Instrução ALTER TABLE</a></div>
<div><a href="rrefcallprocedure.html" title="">CALL (PROCEDIMENTO)</a></div>
<div><a href="rrefsqlj13590.html" title="">Cláusula CONSTRAINT</a></div>
<div><a href="rrefdeclaretemptable.html" title="">Instrução DECLARE GLOBAL TEMPORARY TABLE</a></div>
<div><a href="rrefsqlj35981.html" title="">Instrução DELETE</a></div>
<div><a href="rrefsqlj31783.html" title="">Cláusula FOR UPDATE</a></div>
<div><a href="rrefsqlj21583.html" title="">Cláusula FROM</a></div>
<div><a href="rrefsqlj32654.html" title="">Cláusula GROUP BY</a></div>
<div><a href="rrefsqlj14854.html" title="">Cláusula HAVING</a></div>
<div><a href="rrefsqlj35034.html" title="">INNER JOIN</a></div>
<div><a href="rrefsqlj40774.html" title="">Instrução INSERT</a></div>
<div><a href="rrefsqlj29840.html" title="">Operação JOIN</a></div>
<div><a href="rrefsqlj18922.html" title="">LEFT OUTER JOIN</a></div>
<div><a href="rrefsqlj40506.html" title="">Instrução LOCK TABLE</a></div>
<div><a href="rrefsqlj13658.html" title="">Cláusula ORDER BY</a></div>
<div><a href="rrefsqlj21571.html" title="">Consulta</a></div>
<div><a href="rrefsqlj57522.html" title="">RIGHT OUTER JOIN</a></div>
<div><a href="rrefscalarsubquery.html" title="">SubconsultaEscalar</a></div>
<div><a href="rrefselectexpression.html" title="">ExpressãoSeleção</a></div>
<div><a href="rrefsqlj41360.html" title="">Instrução SELECT</a></div>
<div><a href="rreftableexpression.html" title="">ExpressãoTabela</a></div>
<div><a href="rreftablesubquery.html" title="">SubconsultaTabela</a></div>
<div><a href="rrefsqlj11277.html" title="">VALUES Expressão</a></div>
<div><a href="rrefsqlj33602.html" title="">Cláusula WHERE</a></div>
<div><a href="rrefsqlj15309.html" title="">Cláusula WHERE CURRENT OF</a></div>
</div>
</div>

</body>
</html>
