<?xml version="1.0" encoding="UTF-8"?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="pt-br" xml:lang="pt-br">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<meta name="copyright" content="(C) Copyright 2005" />
<meta name="DC.rights.owner" content="(C) Copyright 2005" />
<meta content="public" name="security" />
<meta content="index,follow" name="Robots" />
<meta http-equiv="PICS-Label" content='(PICS-1.1 "http://www.icra.org/ratingsv02.html" l gen true r (cz 1 lz 1 nz 1 oz 1 vz 1) "http://www.rsac.org/ratingsv01.html" l gen true r (n 0 s 0 v 0 l 0) "http://www.classify.org/safesurf/" l gen true r (SS~~000 1))' />
<meta content="reference" name="DC.Type" />
<meta name="DC.Title" content="Instrução SELECT" />
<meta content="Instrução SELECT, Cláusula ORDER BY, necessária para garantir a ordem dos resultados" name="DC.subject" />
<meta content="Instrução SELECT, Cláusula ORDER BY, necessária para garantir a ordem dos resultados" name="keywords" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj39374.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj22771.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj81859.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj95081.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj80721.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqljrenamestatements.html" />
<meta scheme="URI" name="DC.Relation" content="crefsqlj35312.html" />
<meta scheme="URI" name="DC.Relation" content="rrefcallprocedure.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13590.html" />
<meta scheme="URI" name="DC.Relation" content="rrefdeclaretemptable.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35981.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj31783.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21583.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj32654.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj14854.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj35034.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40774.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj29840.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj18922.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj40506.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj13658.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj21571.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj57522.html" />
<meta scheme="URI" name="DC.Relation" content="rrefscalarsubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefselectexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rreftableexpression.html" />
<meta scheme="URI" name="DC.Relation" content="rreftablesubquery.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj26498.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj11277.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj33602.html" />
<meta scheme="URI" name="DC.Relation" content="rrefsqlj15309.html" />
<meta content="XHTML" name="DC.Format" />
<meta content="rrefsqlj41360" name="DC.Identifier" />
<meta content="pt-br" name="DC.Language" />
<link href="commonltr.css" type="text/css" rel="stylesheet" />
<title>Instrução SELECT</title>
</head>
<body id="rrefsqlj41360"><a name="rrefsqlj41360"><!-- --></a>


<h1 class="topictitle1">Instrução SELECT</h1>


<div>
<div class="section">
<p>A instrução SELECT consiste de uma consulta com uma
<a href="rrefsqlj13658.html#rrefsqlj13658">Cláusula ORDER BY</a> opcional,
e uma <a href="rrefsqlj31783.html#rrefsqlj31783">Cláusula FOR UPDATE</a>
opcional.
A instrução SELECT possui este nome porque tipicamente a primeira palavra da
construção da consulta é SELECT (A <em>consulta </em> inclui a expressão VALUES,
as expressões UNION, INTERSECT e EXCEPT, além de expressões SELECT).</p>

<p>A <a href="rrefsqlj13658.html#rrefsqlj13658">Cláusula ORDER BY</a>
garante a ordem do <em>ResultSet</em>.
A <a href="rrefsqlj31783.html#rrefsqlj31783">Cláusula FOR UPDATE</a>
torna o resultado um cursor atualizável.
A instrução SELECT suporta a cláusula FOR FETCH ONLY.
A cláusula FOR FETCH ONLY é sinônimo da cláusula FOR READ ONLY.</p>

<div class="remember"><span class="remembertitle">Lembre-se: </span>Para se obter um <em>ResultSet</em> atualizável, deve ser
incluída a cláusula FOR UPDATE com a cláusula SELECT.</div>

</div>

<div class="section"><h2 class="sectiontitle">Sintaxe</h2>

<pre><strong><em><a href="rrefsqlj21571.html#rrefsqlj21571">Consulta</a></em>
[<em><a href="rrefsqlj13658.html#rrefsqlj13658">Cláusula ORDER BY</a></em>]
[<em><a href="rrefsqlj31783.html#rrefsqlj31783">Cláusula FOR UPDATE</a></em>]
WITH {RR|RS|CS|UR}</strong>
</pre>

<p>Pode ser definido o nível de isolamento da instrução SELECT utilizando
a sintaxe WITH {RR|RS|CS|UR}.</p>

</div>

<div class="example">
<pre><strong><span>-- listar o nome da expressão SALÁRIO+BÔNUS+COMISS
-- como PAGAMENTO_TOTAL,
-- e ordenar pelo novo nome PAGAMENTO_TOTAL</span>
SELECT PRIMEIRO_NOME, SALÁRIO+BÔNUS+COMISS AS PAGAMENTO_TOTAL
FROM EMPREGADOS
ORDER BY PAGAMENTO_TOTAL;

<span>-- criar um cursor atualizável através da cláusula FOR UPDATE
-- para atualizar as colunas data de início (PROJ_DATA_INÍCIO) e
-- data de término (PROJ_DATA_FIM) da tabela PROJETO</span>
SELECT NUM_PROJ, PROJ_DATA_INÍCIO, PROJ_DATA_FIM
FROM PROJETO
FOR UPDATE OF PROJ_DATA_INÍCIO, PROJ_DATA_FIM;

<span>-- definir o nível de isolamento como RR apenas para esta instrução</span>
SELECT *
FROM VÔOS
WHERE ID_VÔO BETWEEN 'AA1111' AND 'AA1112'
WITH RR;</strong>
</pre>

<div class="p">A instrução SELECT retorna um <em>ResultSet</em>.
O <em>cursor</em> é um ponteiro para uma linha específica do <em>ResultSet</em>.
Nos aplicativos Java, todos os <em>ResultSets</em> são cursores.
O cursor é atualizável, ou seja, podem ser atualizadas e excluídas linhas ao
se caminhar através do <em>ResultSet</em>, se a instrução SELECT que gerou o
cursor e sua consulta subjacente atenderem aos requisitos de poder ser
atualizável, conforme detalhado abaixo.
Deve ser utilizada a cláusula FOR UPDATE quando se deseja gerar um cursor
atualizável.
<div class="note"><span class="notetitle">Nota: </span>A cláusula ORDER BY permite ordenar os resultados do SELECT.
Sem a cláusula ORDER BY, os resultados são retornados em ordem aleatória.</div>

</div>

<p>Se a instrução SELECT atender aos requisitos listados abaixo, os cursores
serão atualizáveis apenas se for especificado FOR UPDATE na cláusula FOR
(consulte a <a href="rrefsqlj31783.html#rrefsqlj31783">Cláusula FOR UPDATE</a>).</p>

</div>

<div class="section" id="rrefsqlj41360__sqlj15384"><a name="rrefsqlj41360__sqlj15384"><!-- --></a><h2 class="sectiontitle">Requisitos para cursores atualizáveis e ResultSets atualizáveis</h2>

<div class="p">Somente os cursores simples, com SELECT em uma única tabela, e os
<em>ResultSets</em> FORWARD_ONLY, podem ser atualizáveis.
A instrução SELECT para <em>ResultSet</em> atualizável possui a mesma sintaxe
que a instrução SELECT para cursor atualizável.
Para gerar cursores atualizáveis:
<ul>
<li>A instrução SELECT não pode incluir a cláusula ORDER BY.</li>

<li>A <em>Consulta</em> subjacente deve ser uma
<em><a href="rrefselectexpression.html#rrefselectexpression">ExpressãoSeleção</a>.</em></li>

<li>A <em><a href="rrefselectexpression.html#rrefselectexpression">ExpressãoSeleção</a></em>
da Consulta subjacente não pode incluir:
<ul>
<li>DISTINCT</li>

<li>Agregações</li>

<li>Cláusula GROUP BY</li>

<li>Cláusula HAVING</li>

</ul>

</li>

<li>A cláusula FROM na <em>Consulta</em> subjacente não pode ter:
<ul>
<li>mais de uma tabela</li>

<li>qualquer outra coisa além de um nome de tabela</li>

<li><em><a href="rrefselectexpression.html#rrefselectexpression">ExpressãoSeleção</a></em></li>

<li>subconsultas</li>

</ul>

</li>

</ul>

</div>

<p>Não existe instrução na linguagem SQL para <em>atribuir</em> nome a um
cursor.
Em vez disso, deve ser utilizada a API do JDBC para atribuir nomes a cursores
ou obter os nomes gerados pelo sistema.
Para obter mais informações, deve ser consultado "Atribuir nome ou acessar o
nome do cursor" no capítulo 5 do
<cite><span><em>Guia do Desenvolvedor do Derby</em></span></cite>.</p>

<p>Os cursores são apenas-de-leitura por padrão.
Para um cursor ser atualizável, deve ser especificado FOR UPDATE na cláusula
FOR (consulte a <a href="rrefsqlj31783.html#rrefsqlj31783">Cláusula FOR UPDATE</a>).</p>

</div>

<div class="section"><h2 class="sectiontitle">Sistema de dependência de instrução</h2>

<p>A instrução SELECT depende de todas as tabelas e visões especificadas na
consulta, e dos conglomerados (unidades de armazenamento, como <em>heaps</em> e
índices) escolhidos como caminho de acesso para estas tabelas.
A instrução CREATE INDEX não invalida a instrução SELECT preparada.
A instrução DROP INDEX invalida a instrução SELECT preparada, se o índice for
um caminho de acesso na instrução.
Quando o SELECT inclui visões, também depende dos objetos do dicionário dos
quais as visões dependem (consulte a
<a href="rrefsqlj15446.html#rrefsqlj15446">Instrução CREATE VIEW</a>).</p>

<p>Toda instrução UPDATE WHERE CURRENT ou DELETE WHERE CURRENT preparada
sobre cursor de SELECT depende do SELECT.
A remoção do SELECT através de uma instrução <em>java.sql.Statement.close</em>
invalida UPDATE WHERE CURRENT e DELETE WHERE CURRENT.</p>

<p>O SELECT depende de todos os aliases utilizados na consulta.
Remover um aliás invalida a instrução SELECT preparada, se a instrução utilizar
o aliás.</p>

</div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>Tópico pai:</strong> <a href="crefsqlj39374.html" title="">Instruções</a></div>
</div>
<div class="relconcepts"><strong>Conceitos relacionados</strong><br />
<div><a href="crefsqlj22771.html" title="">Interação com o sistema de dependências</a></div>
<div><a href="crefsqlj95081.html" title="">Instruções CREATE</a></div>
<div><a href="crefsqlj80721.html" title="">Instruções DROP</a></div>
<div><a href="crefsqljrenamestatements.html" title="">Instruções RENAME</a></div>
<div><a href="crefsqlj35312.html" title="">Instruções SET</a></div>
</div>
<div class="relref"><strong>Referências relacionadas</strong><br />
<div><a href="rrefsqlj81859.html" title="">Instrução ALTER TABLE</a></div>
<div><a href="rrefcallprocedure.html" title="">CALL (PROCEDIMENTO)</a></div>
<div><a href="rrefsqlj13590.html" title="">Cláusula CONSTRAINT</a></div>
<div><a href="rrefdeclaretemptable.html" title="">Instrução DECLARE GLOBAL TEMPORARY TABLE</a></div>
<div><a href="rrefsqlj35981.html" title="">Instrução DELETE</a></div>
<div><a href="rrefsqlj31783.html" title="">Cláusula FOR UPDATE</a></div>
<div><a href="rrefsqlj21583.html" title="">Cláusula FROM</a></div>
<div><a href="rrefsqlj32654.html" title="">Cláusula GROUP BY</a></div>
<div><a href="rrefsqlj14854.html" title="">Cláusula HAVING</a></div>
<div><a href="rrefsqlj35034.html" title="">INNER JOIN</a></div>
<div><a href="rrefsqlj40774.html" title="">Instrução INSERT</a></div>
<div><a href="rrefsqlj29840.html" title="">Operação JOIN</a></div>
<div><a href="rrefsqlj18922.html" title="">LEFT OUTER JOIN</a></div>
<div><a href="rrefsqlj40506.html" title="">Instrução LOCK TABLE</a></div>
<div><a href="rrefsqlj13658.html" title="">Cláusula ORDER BY</a></div>
<div><a href="rrefsqlj21571.html" title="">Consulta</a></div>
<div><a href="rrefsqlj57522.html" title="">RIGHT OUTER JOIN</a></div>
<div><a href="rrefscalarsubquery.html" title="">SubconsultaEscalar</a></div>
<div><a href="rrefselectexpression.html" title="">ExpressãoSeleção</a></div>
<div><a href="rreftableexpression.html" title="">ExpressãoTabela</a></div>
<div><a href="rreftablesubquery.html" title="">SubconsultaTabela</a></div>
<div><a href="rrefsqlj26498.html" title="">Instrução UPDATE</a></div>
<div><a href="rrefsqlj11277.html" title="">VALUES Expressão</a></div>
<div><a href="rrefsqlj33602.html" title="">Cláusula WHERE</a></div>
<div><a href="rrefsqlj15309.html" title="">Cláusula WHERE CURRENT OF</a></div>
</div>
</div>

</body>
</html>
